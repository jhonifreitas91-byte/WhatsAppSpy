<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Quiz Completo - 3 Passos</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{
            background:#f5f5dc url("data:image/svg+xml,%3Csvg width='40' height='40' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0h40v40H0z' fill='%23f5f5dc'/%3E%3Cpath d='M0 0l40 40M40 0L0 40' stroke='%23ddd' stroke-width='1'/%3E%3C/svg%3E");
            color:#000;
            font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
            display:flex;
            align-items:center;
            justify-content:center;
            min-height:100vh;
            padding:20px
        }
        .container{
            width:100%;
            max-width:420px;
            background:#fff;
            border-radius:20px;
            padding:32px 24px;
            box-shadow:0 8px 24px rgba(0,0,0,.15);
            position:relative;
        }
        .back-arrow{
            position:absolute;
            top:20px;
            left:20px;
            width:40px;
            height:40px;
            background:#25D366;
            border-radius:50%;
            display:flex;
            align-items:center;
            justify-content:center;
            cursor:pointer;
            transition:transform .15s;
        }
        .back-arrow:hover{transform:scale(1.1)}
        .back-arrow svg{
            width:20px;
            height:20px;
            fill:#fff;
        }
        .step-badge{
            background:#25D366;
            color:#fff;
            display:inline-block;
            padding:6px 18px;
            border-radius:20px;
            font-weight:700;
            font-size:14px;
            margin-bottom:20px
        }
        .top-image{
            width:100%;
            max-width:280px;
            margin:0 auto 20px;
            border-radius:12px;
            overflow:hidden;
            background:#111;
        }
        .top-image img{
            width:100%;
            height:auto;
            display:block;
        }
        h1{font-size:22px;margin-bottom:6px}
        .sub{font-size:13px;color:#555;margin-bottom:24px}
        .option-btn{
            width:100%;
            background:#c8f5d3;
            border:none;
            color:#000;
            font-size:16px;
            font-weight:600;
            padding:16px;
            border-radius:12px;
            margin-bottom:12px;
            cursor:pointer;
            display:flex;
            align-items:center;
            justify-content:space-between;
            transition:transform .15s
        }
        .option-btn:hover{transform:scale(1.02)}
        .check{width:20px;height:20px;border:2px solid #25D366;border-radius:4px;background:#fff}
        .check.selected{background:#25D366 url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23fff'%3E%3Cpath d='M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z'/%3E%3C/svg%3E") center/14px no-repeat}
        .continue-btn{
            width:100%;
            background:#25D366;
            border:none;
            color:#fff;
            font-size:18px;
            font-weight:700;
            padding:18px;
            border-radius:12px;
            cursor:pointer;
            margin-top:8px;
            transition:transform .15s
        }
        .continue-btn:disabled{
            background:#aaa;
            cursor:not-allowed;
            transform:none
        }
        .page{display:none}
        .page.active{display:block}

        /* Loading Progress Bar */
        .loading-container{
            display:none;
            text-align:center;
            margin-top:30px;
        }
        .loading-bar{
            width:100%;
            height:8px;
            background:#e0e0e0;
            border-radius:4px;
            overflow:hidden;
            margin:20px 0;
        }
        .loading-progress{
            height:100%;
            background:#25D366;
            width:0%;
            transition:width 0.2s ease;
        }
        .loading-text{
            font-size:14px;
            color:#666;
            margin-top:10px;
        }
    </style>
</head>
<body>
    <div class="container">

        <!-- PÃGINA 1 -->
        <div id="pag1" class="page active">
            <div class="back-arrow" onclick="voltar()">
                <svg viewBox="0 0 24 24"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>
            </div>
            <div class="top-image">
                <img src="capa.jpg" alt="Imagem ilustrativa">
            </div>
            <span class="step-badge">1Â° PASSO</span>
            <h1>Que tipo de dispositivo vocÃª quer investigar?</h1>
            <button class="option-btn" style="background:#25D366;color:#000" onclick="escolha('iphone')">
                <img src="https://cdn-icons-png.flaticon.com/512/0/747.png" alt="Apple" style="height:24px">
                IPHONE
            </button>
            <button class="option-btn" style="background:#25D366;color:#000" onclick="escolha('android')">
                <img src="https://cdn-icons-png.flaticon.com/512/732/732208.png" alt="Android" style="height:24px">
                ANDROID
            </button>
        </div>

        <!-- PÃGINA 2 (atividades) -->
        <div id="pag2" class="page">
            <div class="back-arrow" onclick="voltar()">
                <svg viewBox="0 0 24 24"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>
            </div>
            <span class="step-badge">2Â° PASSO</span>
            <h1>Quais atividades deseja monitorar?</h1>
            <p class="sub">*VocÃª pode selecionar quantas alternativas quiser</p>

            <div class="option-btn" onclick="toggle(this);verificaAtividades()">
                <span>WhatsApp e mensagens<br><small style="font-weight:400">(incluindo mensagens excluÃ­das)</small></span>
                <div class="check"></div>
            </div>
            <div class="option-btn" onclick="toggle(this);verificaAtividades()">
                <span>Chamadas</span>
                <div class="check"></div>
            </div>
            <div class="option-btn" onclick="toggle(this);verificaAtividades()">
                <span>LocalizaÃ§Ã£o GPS</span>
                <div class="check"></div>
            </div>
            <div class="option-btn" onclick="toggle(this);marcarTodos();verificaAtividades()">
                <span>Tudo acima</span>
                <div class="check"></div>
            </div>

            <button class="continue-btn" id="btnAtividades" disabled onclick="proximo()">PRÃ“XIMO</button>
        </div>

        <!-- PÃGINA 3 (nÃºmero) -->
        <div id="pag3" class="page">
            <div class="back-arrow" onclick="voltar()">
                <svg viewBox="0 0 24 24"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>
            </div>
            <span class="step-badge">3Â° PASSO</span>
            <div class="emoji-lock" style="font-size:48px;margin-bottom:12px">ðŸ”’</div>
            <h1>Qual o nÃºmero da pessoa?</h1>
            <p class="sub">Insira o nÃºmero de telefone para prosseguir com a anÃ¡lise.</p>
            <input type="tel" class="input-box" id="numero" placeholder="(00) 00000-0000" maxlength="15" style="width:100%;background:#111;border:2px solid #25D366;border-radius:12px;padding:16px;font-size:18px;color:#fff;text-align:center;margin-bottom:24px;outline:none" oninput="verificaNumero()">
            <button class="continue-btn" id="btnNumero" disabled onclick="finalizar()">CONTINUAR</button>
            
            <!-- Loading Progress -->
            <div class="loading-container" id="loadingContainer">
                <div class="loading-bar">
                    <div class="loading-progress" id="loadingProgress"></div>
                </div>
                <div class="loading-text" id="loadingText">0%</div>
            </div>
        </div>

    </div>

    <script>
        // Controle de histÃ³rico para impedir volta
        let pagAtual = 1;
        const totalPaginas = 3;

        // Empurra estado inicial
        history.pushState({page:1}, '', '#1');

        window.addEventListener('popstate', function(e){
            // Se tentar voltar, empurra a mesma pÃ¡gina de volta
            history.pushState({page:pagAtual}, '', '#' + pagAtual);
            // Opcional: exibe mensagem ou apenas ignora
        });

        function voltar(){
            if(pagAtual > 1){
                pagAtual--;
                document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
                document.getElementById('pag' + pagAtual).classList.add('active');
                history.pushState({page:pagAtual}, '', '#' + pagAtual);
            }
        }

        function escolha(dispositivo){
            localStorage.setItem('dispositivo', dispositivo);
            pagAtual = 2;
            history.pushState({page:2}, '', '#2');
            document.getElementById('pag1').classList.remove('active');
            document.getElementById('pag2').classList.add('active');
        }
        
        function toggle(el){
            el.querySelector('.check').classList.toggle('selected');
        }
        
        function marcarTodos(){
            const checks = document.querySelectorAll('#pag2 .check');
            const todos = checks[3].classList.contains('selected');
            checks.forEach(c => c.classList[todos ? 'remove' : 'add']('selected'));
        }
        
        function verificaAtividades(){
            const selecionados = document.querySelectorAll('#pag2 .check.selected').length;
            document.getElementById('btnAtividades').disabled = selecionados === 0;
        }
        
        function proximo(){
            const selecionados = [...document.querySelectorAll('#pag2 .check.selected')].map(c => c.parentElement.textContent.trim());
            localStorage.setItem('atividades', JSON.stringify(selecionados));
            pagAtual = 3;
            history.pushState({page:3}, '', '#3');
            document.getElementById('pag2').classList.remove('active');
            document.getElementById('pag3').classList.add('active');
        }
        
        function verificaNumero(){
            const v = document.getElementById('numero').value.replace(/\D/g,'');
            document.getElementById('btnNumero').disabled = v.length < 10;
        }
        
        function finalizar(){
            const v = document.getElementById('numero').value.replace(/\D/g,'');
            localStorage.setItem('numero', v);
            
            // Esconde botÃ£o e mostra loading
            document.getElementById('btnNumero').style.display = 'none';
            document.getElementById('loadingContainer').style.display = 'block';
            
            // Inicia progress bar
            let progress = 0;
            const progressBar = document.getElementById('loadingProgress');
            const progressText = document.getElementById('loadingText');
            
            const interval = setInterval(() => {
                progress += 1;
                progressBar.style.width = progress + '%';
                progressText.textContent = progress + '%';
                
                if(progress >= 100){
                    clearInterval(interval);
                    setTimeout(() => {
                        alert('NÃºmero salvo: ' + v);
                    }, 500);
                }
            }, 200); // 200ms * 100 = 20 segundos
        }
    </script>
</body>
</html>
